<!DOCTYPE html>
<html xml:th="http://thymeleaf.org" lang="en">
<head th:replace="~{fragments/layout :: head('Home')}">
</head>
<body>
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" th:href="@{/css/sidebarStyles.css}">
<div th:insert="fragments/GPM-sidebar :: sidebar"></div>

  <div class="main-content">
    <a href="/gpm/uploadContent" class="upload-btn">Upload Content</a>
    <h1>Your Uploaded Videos</h1>
    
    <div class="content-container">
      
      <!-- Left: Video Gallery -->
      <div class="video-gallery">



          <div th:each="video : ${videos}" class="video-card" th:onclick=" 'showPreview(\'' + ${video.thumbnailUrl} + '\'. \'' + +${video.title} + '\',\'' + ${video.description} + '\',\'' + ${video.videoUrl} + '\')'">

            <img th:src="@{${video.thumbnailUrl}}" th:alt="${video.title}" class="video-thumbnail">
          <p class="video-title"></p>
          <h1 th:text="${video.videoUrl}"></h1>
            <div class="preview-buttons" style="padding:10px">
              <a th:href="@{'/gpm/edit_content/' + ${video.id}}" class="edit-btn" style="text-align: center;">Edit</a>
              <a th:href="@{'/gpm/delete_content/' + ${video.id}}" class="delete-btn" style="text-align: center;">Delete</a>
            </div>
          </div>








      </div>

      <!-- Right: Preview Section -->

    </div>
  </div>

<script>
  function showPreview(imageSrc, title, description, videoUrl) {
    // Update thumbnail and text content
    const previewThumbnail = document.querySelector('.preview-thumbnail');
    const videoPreview = document.querySelector('#video-preview');

    // Update text content
    document.querySelector('.preview-title').textContent = title;
    document.querySelector('.preview-description').textContent = description;

    // Show video if URL is provided
    if (videoUrl) {
      previewThumbnail.style.display = 'none';
      videoPreview.style.display = 'block';
      videoPreview.src = videoUrl;
    } else {
      // If no video URL, show thumbnail
      previewThumbnail.style.display = 'block';
      videoPreview.style.display = 'none';
      previewThumbnail.src = imageSrc;
    }


  }



</script>

</body>
</html>
